/*!
 * Page Performance Logger v0.1 (http://okize.github.com/)
 * Copyright (c) 2012 | Licensed under the MIT license - http://www.opensource.org/licenses/mit-license.php
 */(function(e,t,n){"use strict";var r=function(){var r=typeof e.performance!="undefined"&&typeof performance.timing!="undefined"&&typeof performance.navigation!="undefined"?!0:!1,i=typeof e.console!="undefined"&&typeof console.log!="undefined"?!0:!1,s=i&&typeof console.group!="undefined"?!0:!1,o=typeof e.JSON!="undefined"&&typeof JSON.stringify!="undefined"?!0:!1;if(r){var u=performance.timing,a=performance.navigation,f={vh:e.innerHeight,vw:e.innerWidth,wh:e.outerHeight,ww:e.outerWidth,mh:screen.height,mw:screen.width},l=function(){return{"Page Information":{Timestamp:new Date,URL:e.location.href,Site:e.location.host,"Page Title":t.title,"DOM Nodes":t.getElementsByTagName("*").length},"User Information":{"User Agent":e.navigator.userAgent,Language:e.navigator.language||e.navigator.userLanguage,"Viewport Dimensions":{height:f.vh,width:f.vw},"Window Dimensions":{height:f.wh,width:f.ww},"Monitor Dimensions":{height:f.mh,width:f.mw}},"Navigation Timing":{"Performance Timing":u,"Performance Navigation":a}}},c=function(){return o?JSON.stringify(l()):"Can't execute returnPagePerformanceAsJson() function because there is no native JSON support"},h=function(){var t,n,r,o=function(e){var t=["Clicked link or entered url in address bar","Page reload","Backward or forward in browser history"],n=t[e]||"Reserved (unknown) Navigation Type";return n},c=function(e){delete e["Navigation Timing"],e["Performance Timing"]={"Redirecting Time":u.redirectEnd-u.redirectStart,"Network Latency":u.responseEnd-u.fetchStart,"Domain Lookup (DNS)":u.domainLookupEnd-u.domainLookupStart,"Establishing Connection (TCP)":u.connectEnd-u.connectStart,"Request-Response":u.responseEnd-u.requestStart,"DOM Processing":u.domComplete-u.domLoading,"User-Perceived Loading Time":u.loadEventEnd-u.navigationStart};for(var t in e["Performance Timing"])e["Performance Timing"][t]+="ms";return e["Performance Navigation"]={"Navigation Type":o(a.type),"Redirect Count":a.redirectCount},e},h=function(t){return t["User Information"]={"User Agent":e.navigator.userAgent,Language:e.navigator.language||e.navigator.userLanguage,"Viewport Dimensions":"width: "+f.vw+"px | height: "+f.vh+"px","Window Dimensions":"width: "+f.ww+"px | height: "+f.wh+"px","Monitor Dimensions":"width: "+f.mw+"px | height: "+f.mh+"px"},t},p=h(c(l()));if(i&&s){console.group("==☆ Page Performance Log ☆==");for(t in p){console.group(t+": ");for(n in p[t])r=p[t][n],console.log(n+" -> "+r);console.groupEnd()}console.groupEnd()}else if(i)for(t in p){console.log(t+": ");for(n in p[t])console.log(n+" -> "+p[t][n])}else alert("There is no console to log page performance object to")};return e.pagePerformance={obj:l,json:c,log:h}}return n};typeof e!="undefined"&&(e.addEventListener?e.addEventListener("load",r,!1):e.attachEvent?e.attachEvent("onload",r):e.onload=r)})(window,window.document);